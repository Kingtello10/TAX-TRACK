<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TaxTrack NG | Live Tax Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
* { box-sizing: border-box; margin:0; padding:0; }
body { font-family:"Inter",sans-serif; background:#f6f8fb; color:#1f2937; line-height:1.6; }
a { text-decoration:none; color:inherit; }
button { cursor:pointer; }

.layout { display:flex; min-height:100vh; }
.sidebar { width:250px; background:#1ea672; color:#e5e7eb; padding:30px 20px; position:sticky; top:0; height:100vh; }
.logo { font-size:1.3rem; font-weight:700; margin-bottom:40px; display:flex; align-items:center; gap:10px; }
.menu { list-style:none; display:flex; flex-direction:column; gap:14px; }
.menu a { padding:10px 14px; border-radius:8px; display:flex; align-items:center; gap:10px; color:#cbd5f5; font-size:0.95rem; }
.menu a:hover, .menu a.active { background:#16a085; color:#fff; }
.main-content { flex:1; display:flex; flex-direction:column; }
.topbar { background:#fff; border-bottom:1px solid #e5e7eb; padding:20px 32px; display:flex; justify-content:space-between; align-items:center; }
.topbar h1 { font-size:1.4rem; font-weight:600; }

.page { padding:40px 32px; max-width:1200px; width:100%; }
.page.hidden { display:none; }
.page h2 { font-size:1.6rem; margin-bottom:10px; }
.page p { margin-bottom:20px; color:#4b5563; }

.form-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:20px; background:#fff; padding:24px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.05); }
label { display:flex; flex-direction:column; font-size:0.9rem; gap:6px; }
input, select, textarea { padding:10px 12px; border-radius:8px; border:1px solid #d1d5db; font-size:0.95rem; }
textarea { min-height:120px; resize:vertical; }
.primary-btn { background:#1ea672; color:#fff; border:none; border-radius:10px; padding:12px 16px; font-size:0.95rem; }
.primary-btn:hover { background:#16a085; }
.full-width { grid-column:1/-1; }

.dashboard-cards { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:20px; margin-bottom:32px; }
.card { background:#fff; padding:24px; border-radius:14px; box-shadow:0 4px 12px rgba(0,0,0,0.05); text-align:center; }
.card h3 { font-size:1rem; margin-bottom:8px; }
.card p { font-size:1.6rem; font-weight:600; }

table { width:100%; border-collapse:collapse; background:#fff; border-radius:12px; overflow:hidden; }
th, td { padding:14px 16px; border-bottom:1px solid #e5e7eb; font-size:0.9rem; text-align:left; }
th { background:#f9fafb; }

footer { background:#1ea672; color:#cbd5f5; padding:32px; text-align:center; width:100%; }
footer .social-icons { margin-top:10px; display:flex; justify-content:center; gap:16px; }
footer a { color:#cbd5f5; font-size:1.1rem; }
footer a:hover { color:#fff; }

@media(max-width:768px) { .layout { flex-direction:column; } .sidebar { width:100%; height:auto; position:relative; } .main-content { flex:unset; }
}
</style>

<script>
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
  document.querySelectorAll('.menu a').forEach(a=>a.classList.remove('active'));
  document.querySelector(`[data-page="${id}"]`).classList.add('active');
  window.scrollTo({top:0, behavior:'smooth'});
}

// ===== GLOBAL DATA =====
let taxData = {
  paye:0,
  vat:0,
  consumption:0,
  transactions:[]
};

// ===== CALCULATORS =====
function calculatePAYE(){
  const gross=Number(document.getElementById('gross').value||0);
  const pension=Number(document.getElementById('pension').value||0);
  const nhf=Number(document.getElementById('nhf').value||0);
  const other=Number(document.getElementById('otherReliefs').value||0);
  const reliefs = pension+nhf+other+200000;
  const taxable = Math.max(gross - reliefs,0);
  const tax = taxable*0.15;
  addTransaction(new Date().toISOString().split('T')[0],'PAYE',tax,'Salary Tax Calculation');
  document.getElementById('payeResult').innerText=`Estimated PAYE: ₦${tax.toLocaleString()}`;
}

function calculateVAT(){
  const amount=Number(document.getElementById('vatAmount').value||0);
  const vat = amount*0.075;
  addTransaction(new Date().toISOString().split('T')[0],'VAT',vat,'VAT Calculation');
  document.getElementById('vatResult').innerText=`VAT (7.5%): ₦${vat.toLocaleString()}`;
}

// ===== TRANSACTION MANAGEMENT =====
function addTransaction(date,type,amount,details){
  taxData.transactions.push({date,type,amount,details});
  renderTransactions();
  updateSummary();
}

// ===== RENDER TRANSACTIONS =====
function renderTransactions(){
  const tbody = document.getElementById('historyBody');
  tbody.innerHTML='';
  taxData.transactions.forEach(tx=>{
    const row=document.createElement('tr');
    row.innerHTML=`<td>${tx.date}</td><td>${tx.type}</td><td>₦${tx.amount.toLocaleString()}</td><td>${tx.details}</td>`;
    tbody.appendChild(row);
  });
}

// ===== SUMMARY & CHART =====
let chart;
function updateSummary(){
  const totalPAYE = taxData.transactions.filter(t=>t.type==='PAYE').reduce((sum,t)=>sum+t.amount,0);
  const totalVAT = taxData.transactions.filter(t=>t.type==='VAT').reduce((sum,t)=>sum+t.amount,0);
  const totalConsumption = taxData.transactions.filter(t=>t.type==='Consumption').reduce((sum,t)=>sum+t.amount,0);

  taxData.paye = totalPAYE;
  taxData.vat = totalVAT;
  taxData.consumption = totalConsumption;

  document.getElementById('cardIncome').innerText=`₦${totalPAYE.toLocaleString()}`;
  document.getElementById('cardVAT').innerText=`₦${totalVAT.toLocaleString()}`;
  document.getElementById('cardConsumption').innerText=`₦${totalConsumption.toLocaleString()}`;

  if(chart){
    chart.data.datasets[0].data=[totalPAYE,totalVAT,totalConsumption];
    chart.update();
  }
}

// ===== EXPORT CSV =====
function exportCSV(){
  let csv='Date,Type,Amount,Details\n';
  taxData.transactions.forEach(tx=>{
    csv+=`${tx.date},${tx.type},${tx.amount},${tx.details}\n`;
  });
  const blob=new Blob([csv],{type:'text/csv'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');
  a.href=url; a.download='tax_history.csv'; a.click();
  URL.revokeObjectURL(url);
}

document.addEventListener('DOMContentLoaded',()=>{
  const ctx = document.getElementById('taxChart').getContext('2d');
  chart = new Chart(ctx,{type:'pie',data:{labels:['Income Tax','VAT','Consumption'],datasets:[{data:[0,0,0], backgroundColor:['#1ea672','#16a085','#10b981']}]},options:{responsive:true,plugins:{legend:{position:'bottom'}}}});
});
</script>
</head>

<body>
<div class="layout">
  <aside class="sidebar">
    <div class="logo"><i class="fas fa-coins"></i> TaxTrack NG</div>
    <ul class="menu">
      <li><a href="#" data-page="salary" onclick="showPage('salary')"><i class="fas fa-money-check-dollar"></i> Salary Tax</a></li>
      <li><a href="#" data-page="vat" onclick="showPage('vat')"><i class="fas fa-receipt"></i> VAT & Consumption</a></li>
      <li><a href="#" data-page="summary" onclick="showPage('summary')"><i class="fas fa-chart-pie"></i> Tax Summary</a></li>
      <li><a href="#" data-page="history" onclick="showPage('history')"><i class="fas fa-history"></i> Tax History</a></li>
      <li><a href="#" data-page="profile" onclick="showPage('profile')"><i class="fas fa-user-circle"></i> Profile</a></li>
      <li><a href="#" data-page="settings" onclick="showPage('settings')"><i class="fas fa-cogs"></i> Settings</a></li>
    </ul>
  </aside>

  <div class="main-content">
    <header class="topbar">
      <h1>TaxTrack NG Dashboard</h1>
      <div class="user-menu"><i class="fas fa-user-circle"></i> User</div>
    </header>

    <!-- SALARY PAGE -->
    <section id="salary" class="page">
      <h2>Salary Tax Calculator</h2>
      <p>Estimate your PAYE based on your salary and reliefs.</p>
      <form class="form-grid" onsubmit="event.preventDefault(); calculatePAYE();">
        <label>Gross Salary (₦)<input id="gross" type="number" required></label>
        <label>Pension (₦)<input id="pension" type="number"></label>
        <label>NHF (₦)<input id="nhf" type="number"></label>
        <label>Other Reliefs (₦)<input id="otherReliefs" type="number"></label>
        <button class="primary-btn full-width">Calculate PAYE</button>
        <div id="payeResult" style="grid-column:1/-1;font-weight:600;"></div>
      </form>
    </section>

    <!-- VAT & Consumption PAGE -->
<section id="vat" class="page hidden">
  <h2>VAT & Consumption Tax</h2>
  <p>Import receipts, CSVs, or enter transactions manually. All transactions will be analyzed automatically.</p>

  <div class="form-grid">

    <!-- File Import: CSV or Receipts -->
    <label>
      Import CSV / Receipt Images
      <input type="file" id="vatFileInput" accept=".csv,image/*" multiple data-type="vatInput">
      <small>Select CSV files or images. They will be analyzed automatically.</small>
    </label>

    <!-- Manual Transaction Input -->
    <label>Total Expenses (₦)
      <input type="number" id="vatAmountManual" placeholder="Enter expense amount manually">
    </label>
    <label>Transaction Details
      <input type="text" id="vatDetailsManual" placeholder="E.g., Office supplies">
    </label>
    <label>Type
      <select id="vatTypeManual">
        <option value="VAT">VAT</option>
        <option value="Consumption">Consumption</option>
      </select>
    </label>
    <button class="primary-btn full-width" id="addManualTransactionBtn">Add Transaction</button>

    <div id="vatResult" style="grid-column:1/-1; font-weight:600;"></div>
  </div>
</section>

    <!-- SUMMARY PAGE -->
    <section id="summary" class="page hidden">
      <h2>Tax Summary</h2>
      <div class="dashboard-cards">
        <div class="card"><h3>Income Tax</h3><p id="cardIncome">₦0</p></div>
        <div class="card"><h3>VAT</h3><p id="cardVAT">₦0</p></div>
        <div class="card"><h3>Consumption</h3><p id="cardConsumption">₦0</p></div>
      </div>
      <canvas id="taxChart" height="200"></canvas>
    </section>

    <!-- HISTORY PAGE -->
    <section id="history" class="page hidden">
      <h2>Tax History</h2>
      <table>
        <thead>
          <tr><th>Date</th><th>Type</th><th>Amount (₦)</th><th>Details</th></tr>
        </thead>
        <tbody id="historyBody"></tbody>
      </table>
      <form class="form-grid" onsubmit="event.preventDefault(); addTransaction(new Date().toISOString().split('T')[0], document.getElementById('txType').value, Number(document.getElementById('txAmount').value), document.getElementById('txDetails').value);">
        <label>Type<select id="txType"><option>PAYE</option><option>VAT</option><option>Consumption</option></select></label>
        <label>Amount (₦)<input type="number" id="txAmount" required></label>
        <label>Details<input type="text" id="txDetails" required></label>
        <button class="primary-btn full-width">Add Transaction</button>
      </form>
      <button class="primary-btn" onclick="exportCSV()">Export CSV</button>
    </section>

    <!-- PROFILE PAGE -->
    <section id="profile" class="page hidden">
      <h2>User Profile</h2>
      <form class="form-grid">
        <label>Full Name<input type="text" value="John Doe"></label>
        <label>Email<input type="email" value="john@example.com"></label>
        <label>Phone<input type="tel" value="+2348012345678"></label>
        <label>Date of Birth<input type="date" value="1990-01-01"></label>
        <label>Password<input type="password" value="password"></label>
        <button class="primary-btn full-width">Update Profile</button>
      </form>
    </section>

    <!-- SETTINGS PAGE -->
    <section id="settings" class="page hidden">
      <h2>Settings</h2>
      <form class="form-grid">
        <label>Currency<select><option>NGN</option><option>USD</option></select></label>
        <label>Financial Year Start<input type="month"></label>
        <label>Enable Notifications<select><option>Yes</option><option>No</option></select></label>
        <button class="primary-btn full-width">Save Settings</button>
      </form>
    </section>

    <footer>
      <p>© 2026 TaxTrack NG — Built for Nigerian employees, freelancers & SMEs</p>
      <div class="social-icons">
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-linkedin"></i></a>
        <a href="#"><i class="fab fa-github"></i></a>
      </div>
    </footer>
  </div>
</div>
<script src="dashboard.js" defer></script>
</body>
</html>
